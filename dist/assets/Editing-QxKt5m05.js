import{r as x,u as y,b,p as E,j as e,H as C,T as F,F as I,e as r,f as n,g as c,I as i,d as t,h as d,S as A,i as D,k as P,l as U,m as G,n as V,o as R,B as u,R as T}from"./index-SMcEeSU_.js";import{s as k,C as B,o as H,r as L,u as M}from"./index-qMIRmNEp.js";import{u as O}from"./userApiService-tE94rsL4.js";const _=[{id:"1",value:"システム管理者"},{id:"2",value:"管理者"},{id:"3",value:"事務担当者"},{id:"4",value:"営業担当者"}];function K(){const[s,N]=x.useState(),p=y(),[o,h]=x.useState({submit:!1}),l=b({resolver:H(M),mode:"onBlur",reValidateMode:"onChange",defaultValues:{userId:"",userName:"",userGroupId:"",userEmailAddress:"",userEmailAddressConfirm:"",userStartDate:"",userEndDate:"",userPassword:"",userPasswordConfirm:"",userNotificationStopFlg:!1}});x.useEffect(()=>{var a;l.reset({userId:s==null?void 0:s.userId,userName:s==null?void 0:s.userName,userGroupId:(a=s==null?void 0:s.group)==null?void 0:a.userGroupId,userEmailAddress:s==null?void 0:s.userEmailAddress,userEmailAddressConfirm:s==null?void 0:s.userEmailAddress,userStartDate:s==null?void 0:s.userStartDate,userEndDate:s==null?void 0:s.userEndDate,userPassword:"",userPasswordConfirm:"",userNotificationStopFlg:!1})},[l,s]);const{id:j}=E();x.useEffect(()=>{(async()=>{if(j)try{const m=await O.getUser(j);N(m.data)}catch{console.error("Something went wrong")}})()},[j]);const{handleSubmit:f,formState:{errors:w},watch:g,setValue:v}=l;k("form-user",{watch:g,setValue:v,storage:window.localStorage});const S=async()=>{if(console.log("errors",w),!o.submit){h({...o,submit:!0});try{p(T.USER.CONFIRM)}catch(a){L.error(a)}finally{h({...o,submit:!1})}}};return s?e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsx("title",{children:"ユーザー編集"}),e.jsx("meta",{name:"description",content:"ユーザー編集"})]}),e.jsxs("div",{className:"",children:[e.jsx("section",{className:"",children:e.jsx(F,{children:"ユーザー編集"})}),e.jsx("div",{className:"bg-white py-6 border",children:e.jsx(I,{...l,children:e.jsxs("form",{onSubmit:f(S),children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs(r,{className:"flex",children:[e.jsx(n,{className:"w-[35%]",children:e.jsx("p",{className:"pr-2 flex items-center justify-end leading-[34px]",children:"ユーザーID"})}),e.jsx(c,{className:"w-[45%]",children:e.jsx(r,{className:"",children:e.jsx(i,{disabled:!0,value:s==null?void 0:s.userId})})})]}),e.jsx(t,{control:l.control,name:"userName",render:({field:a})=>e.jsxs(r,{className:"flex",children:[e.jsx(n,{className:"w-[35%]",children:e.jsxs("p",{className:"pr-2 flex items-center justify-end leading-[34px]",children:["ユーザー名 ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]})}),e.jsx(c,{className:"w-[45%]",children:e.jsxs(r,{className:"",children:[e.jsx(i,{...a}),e.jsx(d,{className:"my-2.5 whitespace-nowrap"})]})})]})}),e.jsx(t,{control:l.control,name:"userGroupId",render:({field:a})=>e.jsxs(r,{className:"flex items-center",children:[e.jsx(n,{className:"w-[35%]",children:e.jsxs("p",{className:"pr-2 flex items-center justify-end leading-[34px]",children:["ユーザーグループ ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]})}),e.jsxs(A,{onValueChange:a.onChange,defaultValue:a.value,value:a.value,children:[e.jsx(c,{className:"w-[45%]",children:e.jsx(D,{children:e.jsx(P,{})})}),e.jsx(U,{children:e.jsxs(G,{children:[e.jsx(V,{}),_.map(m=>e.jsx(R,{value:m.id,children:m.value},m.id))]})}),e.jsx(d,{className:"mt-5"})]})]})}),e.jsx(t,{control:l.control,name:"userEmailAddress",render:({field:a})=>e.jsxs(r,{className:"flex",children:[e.jsx(n,{className:"w-[35%]",children:e.jsx("p",{className:"pr-2 flex items-center justify-end leading-[34px]",children:"メールアドレス"})}),e.jsx(c,{className:"w-[45%]",children:e.jsxs(r,{className:"",children:[e.jsx(i,{...a}),e.jsx(d,{className:"my-2.5 whitespace-nowrap"})]})})]})}),e.jsx(t,{control:l.control,name:"userEmailAddressConfirm",render:({field:a})=>e.jsxs(r,{className:"flex items-center",children:[e.jsx(n,{className:"w-[35%]"}),e.jsx(c,{className:"w-[45%]",children:e.jsxs(r,{className:"",children:[e.jsxs("div",{className:"flex items-center relative",children:[e.jsx(i,{...a}),e.jsx("span",{className:"whitespace-nowrap absolute right-0 translate-x-full",children:"（確認用）"})]}),e.jsx(d,{className:"my-2.5 whitespace-nowrap"})]})})]})}),e.jsxs("div",{className:"flex justify-items-center content-center mb-2",children:[e.jsx(n,{className:"w-[35%] text-right pr-4 leading-[34px]",children:e.jsxs("p",{className:"pr-2 flex items-center justify-end leading-[34px]",children:["ユーザー有効期間 ",e.jsx("span",{className:"text-red-600 text-lg",children:"*"})]})}),e.jsx("div",{className:"w-[45%]",children:e.jsxs("div",{className:"flex gap-2 content-center items-center",children:[e.jsx("div",{className:"mb-2 flex-1",children:e.jsx(t,{control:l.control,name:"userStartDate",render:({field:a})=>e.jsx(r,{className:"flex items-center",children:e.jsx(c,{className:"w-full",children:e.jsxs(r,{className:"",children:[e.jsx(i,{...a}),e.jsx(d,{className:"my-2.5 whitespace-nowrap"})]})})})})}),e.jsx("div",{className:"",children:e.jsx("span",{className:"",children:"～"})}),e.jsx("div",{className:"mb-2 flex-1",children:e.jsx(t,{control:l.control,name:"userEndDate",render:({field:a})=>e.jsx(r,{className:"flex items-center",children:e.jsx(c,{className:"w-full",children:e.jsxs(r,{className:"",children:[e.jsx(i,{...a}),e.jsx(d,{className:"my-2.5 whitespace-nowrap"})]})})})})})]})})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-[35%]"}),e.jsx("div",{className:"w-[45%] text-right",children:"※無期限の場合は 9999999/12/31 をコピー"})]}),e.jsxs("div",{className:"form-group flex justify-items-center content-center mb-2",children:[e.jsx(n,{className:"w-[35%] text-right pr-4 leading-[34px]",children:"パスワード再設定"}),e.jsxs("div",{className:"w-[45%] flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{control:l.control,name:"userPassword",render:({field:a})=>e.jsx(r,{className:"flex items-center",children:e.jsx(c,{className:"w-full",children:e.jsxs(r,{className:"",children:[e.jsx(i,{...a}),e.jsx(d,{className:"my-2.5 whitespace-nowrap"})]})})})})}),e.jsx(t,{control:l.control,name:"userNotificationStopFlg",render:({field:a})=>e.jsxs(r,{className:"flex w-[200px] items-center",children:[e.jsx(c,{children:e.jsx(B,{onCheckedChange:a.onChange})}),e.jsx(n,{className:"flex cursor-pointer items-center",children:e.jsx("span",{className:"text-[13px] text-black font-normal pl-2",children:"パスワード通知メールを送る"})})]})})]})]}),e.jsxs("div",{className:"form-group flex justify-items-center content-center mb-2",children:[e.jsx(n,{className:"w-[35%] text-right pr-4 leading-[34px]"}),e.jsxs("div",{className:"w-[45%] flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{control:l.control,name:"userPasswordConfirm",render:({field:a})=>e.jsx(r,{className:"flex items-center",children:e.jsx(c,{className:"w-full",children:e.jsxs(r,{className:"",children:[e.jsx(i,{...a}),e.jsx(d,{className:"my-2.5 whitespace-nowrap"})]})})})})}),e.jsx("div",{className:"w-[200px]",children:e.jsx("span",{className:"",children:"（確認用）"})})]})]})]}),e.jsxs("div",{className:"flex gap-x-2 mt-5 justify-center",children:[e.jsx(u,{variant:"light",children:"戻る"}),e.jsx(u,{type:"submit",variant:"success",children:"登録"})]})]})})})]})]}):null}export{K as UserEditing};
